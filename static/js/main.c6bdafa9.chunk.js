(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,a){var o={"./cyan.JPG":19,"./green.JPG":20,"./matte.jpg":21,"./matte2.jpg":22,"./orange.JPG":23,"./purple.JPG":24,"./red.JPG":25,"./yellow.JPG":26};function n(e){var t=r(e);return a(t)}function r(e){var t=o[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}n.keys=function(){return Object.keys(o)},n.resolve=r,e.exports=n,n.id=9},,function(e,t,a){e.exports=a(27)},,,,,,function(e,t,a){},,function(e,t,a){e.exports=a.p+"static/media/cyan.09de6e7c.JPG"},function(e,t,a){e.exports=a.p+"static/media/green.00a9b1eb.JPG"},function(e,t,a){e.exports=a.p+"static/media/matte.bd3787cf.jpg"},function(e,t,a){e.exports=a.p+"static/media/matte2.9e4a270b.jpg"},function(e,t,a){e.exports=a.p+"static/media/orange.ebb738dc.JPG"},function(e,t,a){e.exports=a.p+"static/media/purple.d708c9fd.JPG"},function(e,t,a){e.exports=a.p+"static/media/red.fdc32aa2.JPG"},function(e,t,a){e.exports=a.p+"static/media/yellow.9f5092ff.JPG"},function(e,t,a){"use strict";a.r(t);var o=a(1),n=a(2),r=a(4),i=a(3),l=a(5),s=a(0),c=a.n(s),d=a(10),p=a.n(d),m=a(6),h=a.n(m),y=(a(17),function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){for(var e=this.props.dims,t=[],a=0;a<e.xTiles;a++)for(var o=0;o<e.yTiles+1;o++){var n=String(a)+", "+String(o);t.push(c.a.createElement("div",{className:"grid-piece",key:n,style:{top:o*e.dR-15+"px",left:30+a*e.dR+"px",width:e.dR-2+"px",height:e.dR-2+"px"}},","))}return c.a.createElement("div",{className:"grid"},t)}}]),t}(c.a.Component)),u=a(9),f=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){for(var e=this,t=this.props.current,a=this.props.dims,o=t.map(function(o,n){var r="./".concat(t[0].color,".JPG"),i=u(r);return c.a.createElement("div",{key:e.props.current[n].id,className:"block-piece",style:{left:t[n].x*a.dR+a.dR-4,top:t[n].y*a.dR,height:a.dR-4,width:a.dR-4,marginLeft:-(2*a.dR-4),borderWidth:2,backgroundImage:"url("+i+")"}})}),n=this.props.laid,r=[],i=0;i<n.length;i++){var l="./".concat(n[i].color,".JPG"),s=u(l);r.push(c.a.createElement("div",{key:n[i].id,className:"block-piece",style:{left:n[i].x*a.dR+a.dR-4,top:n[i].y*a.dR,height:a.dR-4,width:a.dR-4,marginLeft:-(2*a.dR-4),borderWidth:2,backgroundImage:"url("+s+")"}}))}var d=(a.boardContainerHeight-a.boardHeight)/2-5,p=(a.boardContainerWidth-a.boardWidth)/2-5;return c.a.createElement("div",{className:"board",style:{height:a.boardHeight,width:a.boardWidth,left:p,top:d,borderWidth:5}},c.a.createElement(y,{dims:a}),o,r)}}]),t}(c.a.Component);var b={calcFontSize:function(e,t){return document.documentElement.clientWidth*e*t}},v=a(9),k=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this,t=this.props.next,a=this.props.dims,o=t.map(function(o,n){var r="./".concat(t[0].color,".JPG"),i=v(r),l=0,s=0;return"back-r"===t[0].type||"tp"===t[0].type||"r"===t[0].type||"left"===t[0].type||"right"===t[0].type?(l=-2.9,s=1.7):"l"===t[0].type?(l=-2.8,s=.7):"s"===t[0].type&&(l=-3.35,s=1.8),c.a.createElement("div",{key:e.props.next[n].id,className:"block-piece",style:{left:(t[n].x+l)*a.dR+a.dR-4,top:(t[n].y+s)*a.dR,height:a.dR-4,width:a.dR-4,marginLeft:-(2*a.dR-4),borderWidth:2,backgroundImage:"url("+i+")"}})}),n=b.calcFontSize(a.scoreWidth/document.documentElement.clientWidth,.14);return c.a.createElement("div",{className:"next-block-container",style:{}},c.a.createElement("div",{className:"next-block-header",style:{fontSize:n}},"Next Block"),c.a.createElement("div",{className:"next-block-preview"},o))}}]),t}(c.a.Component),g=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).handleClick=function(e){a.props.onClick(e)},a}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=b.calcFontSize(this.props.dims.scoreWidth/document.documentElement.clientWidth,.14);return c.a.createElement("div",{className:"restart-btn btn",style:{fontSize:e},onClick:this.handleClick},"Restart")}}]),t}(c.a.Component),x=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=b.calcFontSize(this.props.dims.scoreWidth/document.documentElement.clientWidth,.14);return c.a.createElement("div",{className:"scoreboard",style:{fontSize:e}},c.a.createElement("div",{className:"stat score",style:{top:"17%"}},c.a.createElement("span",{className:"stat-word"},"Score"),c.a.createElement("div",{className:"stat-num"},this.props.score)),c.a.createElement("div",{className:"stat level",style:{top:"47%"}},c.a.createElement("span",{className:"stat-word"},"Level"),c.a.createElement("div",{className:"stat-num"},this.props.level)),c.a.createElement("div",{className:"stat lines",style:{top:"77%"}},c.a.createElement("span",{className:"stat-word"},"Lines"),c.a.createElement("div",{className:"stat-num"},this.props.lines)))}}]),t}(c.a.Component),P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).calcDimensions=function(){var e=document.documentElement.clientHeight,t=document.documentElement.clientWidth,a=800,o=700;t<700?a=(o=Math.max(t,200))/7*8:e<800&&(o=(a=Math.max(e,300))/8*7);var n=4*o/7,r=.9*a;return{gameHeight:a,gameWidth:o,boardContainerHeight:a,boardContainerWidth:n,boardHeight:r,boardWidth:.9*n,scoreHeight:3*a/8,scoreWidth:2.6*o/8,dR:r/20,xTiles:10,yTiles:19}},a.chooseRandomBlock=function(){var e,t=["green","red","orange","yellow","purple","cyan"];switch(Math.floor(7*Math.random())){case 0:e=[{x:5,y:0,pos:"left",lay:"horizontal",type:"back-r"},{x:6,y:0,pos:"middle",lay:"horizontal",type:"back-r"},{x:6,y:1,pos:"bottom",lay:"horizontal",type:"back-r"},{x:7,y:1,pos:"bottomRight",lay:"horizontal",type:"back-r"}];break;case 1:e=[{x:6,y:0,pos:"pipe",lay:"vertical",type:"l"},{x:6,y:1,pos:"pipe",lay:"vertical",type:"l"},{x:6,y:2,pos:"pipe",lay:"vertical",type:"l"},{x:6,y:3,pos:"pipe",lay:"vertical",type:"l"}];break;case 2:e=[{x:6,y:0,pos:"square",type:"s"},{x:7,y:0,pos:"square",type:"s"},{x:6,y:1,pos:"square",type:"s"},{x:7,y:1,pos:"square",type:"s"}];break;case 3:e=[{x:5,y:1,pos:"bottomLeft",lay:"horizontal",type:"tp"},{x:6,y:1,pos:"bottom",lay:"horizontal",type:"tp"},{x:7,y:1,pos:"bottomRight",lay:"horizontal",type:"tp"},{x:6,y:0,pos:"middle",lay:"horizontal",type:"tp"}];break;case 4:e=[{x:6,y:0,pos:"middle",lay:"horizontal",type:"r"},{x:7,y:0,pos:"right",lay:"horizontal",type:"r"},{x:5,y:1,pos:"bottomLeft",lay:"horizontal",type:"r"},{x:6,y:1,pos:"bottom",lay:"horizontal",type:"r"}];break;case 5:e=[{x:5,y:1,pos:"bottomLeft",lay:"horizontal",type:"left"},{x:6,y:1,pos:"bottom",lay:"horizontal",type:"left"},{x:7,y:1,pos:"bottomRight",lay:"horizontal",type:"left"},{x:5,y:0,pos:"left",lay:"horizontal",type:"left"}];break;case 6:e=[{x:5,y:1,pos:"bottomLeft",lay:"horizontal",type:"right"},{x:6,y:1,pos:"bottom",lay:"horizontal",type:"right"},{x:7,y:1,pos:"bottomRight",lay:"horizontal",type:"right"},{x:7,y:0,pos:"right",lay:"horizontal",type:"right"}]}for(var a=t[Math.floor(Math.random(0)*t.length)],o=0;o<e.length;o++)e[o].color=a,e[o].id=Math.floor(1e7*Math.random());return e},a.spawnBlock=function(){for(var e=a.state.laidBlocks,t=0;t<a.state.blocks[0].length;t++)e.push(a.state.blocks[0][t]);a.setState({blocks:[a.state.blocks[1],a.chooseRandomBlock()]})},a.laidCollision=function(e){for(var t=0;t<e.length;t++)for(var o=0;o<a.state.laidBlocks.length;o++)if(e[t].x===a.state.laidBlocks[o].x&&e[t].y===a.state.laidBlocks[o].y)return!0;return!1},a.floorCollision=function(e){for(var t=0;t<e.length;t++)if(e[t].y>a.state.dims.yTiles)return!0;return!1},a.wallCollision=function(e,t){for(var o=0;o<e.length;o++)if(e[o].x>=a.state.dims.xTiles+1&&("right"===t||"turn"===t)||e[o].x<=0&&"left"===t||e[o].y<0&&"turn"===t&&"pipe"!==e[o].pos||e[o].x<1&&"turn"===t&&"pipe"===e[o].pos)return!0;return!1},a.leftPiece=function(e){return"horizontal"===e.lay?(e.x+=1,e.y-=1,e.pos="top",e.lay="vertical",e):(e.x+=1,e.pos="middle",e.lay="horizontal",e)},a.topPiece=function(e){return e.x+=1,e.y+=2,e.pos="bottomRight",e.lay="horizontal",e},a.rightPiece=function(e){return e.x-=1,e.y+=1,e.pos="bottom",e.lay="vertical",e},a.bottomPiece=function(e){return"horizontal"===e.lay?(e.x-=1,e.y-=1,e.pos="left",e.lay="vertical",e):(e.x-=1,e.pos="bottomLeft",e.lay="horizontal",e)},a.bottomLeftPiece=function(e){return"horizontal"===e.lay?(e.y-=2,e.pos="topLeft",e.lay="vertical",e):(e.y-=1,e.pos="left",e.lay="horizontal",e)},a.topLeftPiece=function(e){return e.x+=2,e.y+=1,e.pos="right",e.lay="horizontal",e},a.bottomRightPiece=function(e){return e.x-=2,e.pos="bottomLeft",e.lay="vertical",e},a.middlePiece=function(e){return"horizontal"===e.lay?(e.lay="vertical",e):(e.y+=1,e.pos="bottom",e.lay="horizontal",e)},a.turnPipe=function(e){return"vertical"===e[0].lay?(e[0].x+=2,e[0].y+=3,e[0].lay="horizontal",e[1].x+=1,e[1].y+=2,e[2].x-=0,e[2].y+=1,e[3].x-=1,e[3].y+=0):(e[0].x-=2,e[0].y-=3,e[0].lay="vertical",e[1].x-=1,e[1].y-=2,e[2].x-=0,e[2].y-=1,e[3].x+=1,e[3].y+=0),e},a.turnBlock=function(e){if("pipe"===e[0].pos)return a.turnPipe(e),e;for(var t=0;t<e.length;t++)switch(e[t].pos){case"top":e[t]=a.topPiece(e[t]);break;case"right":e[t]=a.rightPiece(e[t]);break;case"bottom":e[t]=a.bottomPiece(e[t]);break;case"left":e[t]=a.leftPiece(e[t]);break;case"topLeft":e[t]=a.topLeftPiece(e[t]);break;case"bottomRight":e[t]=a.bottomRightPiece(e[t]);break;case"bottomLeft":e[t]=a.bottomLeftPiece(e[t]);break;case"middle":e[t]=a.middlePiece(e[t])}return e},a.deleteLine=function(e,t){for(var a=t.length-1;a>=0;a--)t[a].y===e&&t.splice(a,1);for(var o=0;o<t.length;o++)t[o].y<e&&(t[o].y=t[o].y+1)},a.lineTest=function(){var e=[];e.length=a.state.dims.yTiles+1,e.fill(0);for(var t=h.a.map(a.state.laidBlocks,h.a.clone),o=0;o<t.length;o++)e[t[o].y]+=1;for(var n=0,r=0;r<e.length;r++)e[r]===a.state.dims.xTiles&&(a.deleteLine(r,t),a.setState({lines:a.state.lines+1,isUpdatable:!0}),a.updateSpeed(),n++);a.updateScore(n),a.setState({laidBlocks:t})},a.updateScore=function(e){var t=100*e*(1+.2*a.state.level);t*=Math.pow(1.2,e-1),t=Math.floor(t),a.setState({score:a.state.score+t})},a.updateSpeed=function(){a.state.lines%3===0&&!0===a.state.isUpdatable&&(a.state.framesPerMove>=15?a.setState({framesPerMove:a.state.framesPerMove-3}):a.state.framesPerMove>=10?a.setState({framesPerMove:a.state.framesPerMove-2}):a.state.framesPerMove>=6&&a.setState({framesPerMove:a.state.framesPerMove-1}),a.setState({level:a.state.level+1,isUpdatable:!1}))},a.testGameOver=function(){a.laidCollision(a.state.blocks[1],"left")&&(clearInterval(a.intervalId),a.setState({isGameOver:!0}))},a.incrementLocation=function(e,t,a){for(var o=0;o<e.length;o++)e[o][t]=e[o][t]+a},a.moveBlock=function(){var e=h.a.map(a.state.blocks[0],h.a.clone);a.incrementLocation(e,"y",1),a.laidCollision(e)||a.floorCollision(e)?a.spawnBlock():a.setState({blocks:[e,a.state.blocks[1]]}),a.setState({clock:0})},a.nextFrame=function(){a.state.clock>=a.state.framesPerMove&&(a.moveBlock(),a.lineTest(),a.testGameOver(),a.setState({clock:0})),a.setState({dims:a.calcDimensions(),clock:a.state.clock+1})},a.componentDidMount=function(){a.intervalId=setInterval(a.nextFrame,1e3/a.frames)},a.handleKeyDown=function(e){if("r"===e.key&&a.handleClick(e),!a.state.isGameOver){var t=h.a.map(a.state.blocks[0],h.a.clone);"s"===e.key||"40"===e.keyCode?(e.preventDefault(),a.setState({clock:a.state.framesPerMove})):"a"===e.key||"37"===e.keyCode?(e.preventDefault(),a.incrementLocation(t,"x",-1),a.wallCollision(t,"left")||a.laidCollision(t,"left")||a.setState({blocks:[t,a.state.blocks[1]]})):"d"===e.key||"39"===e.keyCode?(e.preventDefault(),a.incrementLocation(t,"x",1),a.wallCollision(t,"right")||a.laidCollision(t,"right")||a.setState({blocks:[t,a.state.blocks[1]]})):"w"!==e.key&&"38"!==e.keyCode||(e.preventDefault(),t=a.turnBlock(t),a.wallCollision(t,"turn")||a.laidCollision(t,"turn")||a.setState({blocks:[t,a.state.blocks[1]]}))}},a.handleClick=function(e){clearInterval(a.intervalId),a.intervalId=setInterval(a.nextFrame,1e3/a.frames),a.setState({blocks:[a.chooseRandomBlock(),a.chooseRandomBlock()],laidBlocks:[],score:0,level:1,lines:0,clock:0,framesPerMove:18,dims:a.calcDimensions(),isGameOver:!1,isUpdatable:!1})},a.frames=60,a.state={blocks:[a.chooseRandomBlock(),a.chooseRandomBlock()],laidBlocks:[],score:0,level:1,lines:0,clock:0,framesPerMove:18,dims:a.calcDimensions(),isGameOver:!1,isUpdatable:!1},a}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.state.dims;return c.a.createElement("div",{className:"game",style:{height:e.gameHeight,width:e.gameWidth},onKeyDown:this.handleKeyDown,tabIndex:"0"},c.a.createElement("div",{className:"board-container",style:{height:e.boardContainerHeight,width:e.boardContainerWidth}},c.a.createElement(f,{current:this.state.blocks[0],laid:this.state.laidBlocks,dims:e})),c.a.createElement("div",{className:"metadata-container",style:{height:e.gameHeight,width:e.gameWidth-e.boardContainerWidth}},c.a.createElement(k,{next:this.state.blocks[1],dims:e}),c.a.createElement(g,{onClick:this.handleClick,dims:e}),c.a.createElement(x,{score:this.state.score,level:this.state.level,lines:this.state.lines,dims:e})))}}]),t}(c.a.Component);p.a.render(c.a.createElement(P,null),document.getElementById("root"))}],[[11,2,1]]]);
//# sourceMappingURL=main.c6bdafa9.chunk.js.map